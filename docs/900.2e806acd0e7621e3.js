"use strict";(self.webpackChunkNuxe=self.webpackChunkNuxe||[]).push([[900],{5900:(R,u,a)=>{a.r(u),a.d(u,{LoginComponent:()=>y});var g=a(1368),i=a(4716),n=a(4496),_=a(816),p=a(1112);function f(e,l){if(1&e&&(n.I0R(0,"div",11),n.OEk(1),n.C$Y()),2&e){const r=n.GaO();n.yG2(),n.cNF(r.error)}}function d(e,l){1&e&&(n.I0R(0,"p",14),n.OEk(1,"Email is required"),n.C$Y())}function c(e,l){1&e&&(n.I0R(0,"p",14),n.OEk(1,"Email format invalid"),n.C$Y())}function E(e,l){if(1&e&&(n.I0R(0,"div",12),n.yuY(1,d,2,0,"p",13)(2,c,2,0,"p",13),n.C$Y()),2&e){const r=n.GaO();let o,t;n.yG2(),n.E7m("ngIf",null==(o=r.loginForm.get("email"))?null:o.getError("required")),n.yG2(),n.E7m("ngIf",null==(t=r.loginForm.get("email"))?null:t.getError("email"))}}function I(e,l){1&e&&(n.I0R(0,"p",14),n.OEk(1,"Password is required"),n.C$Y())}function C(e,l){1&e&&(n.I0R(0,"p",14),n.OEk(1,"Password must start with uppercase"),n.C$Y())}function v(e,l){if(1&e&&(n.I0R(0,"div",12),n.yuY(1,I,2,0,"p",13)(2,C,2,0,"p",13),n.C$Y()),2&e){const r=n.GaO();let o,t;n.yG2(),n.E7m("ngIf",null==(o=r.loginForm.get("password"))?null:o.getError("required")),n.yG2(),n.E7m("ngIf",null==(t=r.loginForm.get("password"))?null:t.getError("pattern"))}}function h(e,l){1&e&&(n.I0R(0,"span"),n.OEk(1,"Login"),n.C$Y())}function L(e,l){1&e&&n.wR5(0,"i",15)}let y=(()=>{class e{constructor(r,o){this._AuthService=r,this._Router=o,this.error="",this.isLoading=!1,this.loginForm=new i.WC({email:new i.Ku(null,[i.AQ.required,i.AQ.email]),password:new i.Ku(null,[i.AQ.required,i.AQ.pattern(/^[A-z]/)])})}ngOnInit(){this._AuthService.userData.subscribe({next:()=>{null!=this._AuthService.userData.getValue()&&this._Router.navigate(["/home"])}})}submitLoginForm(r){this.isLoading=!0,console.log(r.value),console.log("loginForm.value"),this._AuthService.signin(r.value).subscribe({next:o=>{this.isLoading=!1,"success"===o.message?(localStorage.setItem("_token",o.token),this._AuthService.saveUserData()):(this.isLoading=!1,this.error=o.message)},error:o=>{this.isLoading=!1}})}static#n=this.\u0275fac=function(o){return new(o||e)(n.GI1(_.o),n.GI1(p.E5))};static#e=this.\u0275cmp=n.In1({type:e,selectors:[["app-login"]],standalone:!0,features:[n.UHJ],decls:14,vars:7,consts:[[1,"w-75","mx-auto","py-3"],["class","alert alert-danger",4,"ngIf"],["action","",3,"formGroup","ngSubmit"],["for","email"],["formControlName","email","type","email",1,"form-control","mb-2","input-mine"],["class","alert alert-danger py-2",4,"ngIf"],["for","password"],["formControlName","password","type","password",1,"form-control","mb-2","input-mine"],["type","submit",1,"btn","btn-info",3,"disabled"],[4,"ngIf"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"alert","alert-danger"],[1,"alert","alert-danger","py-2"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spinner","fa-spin"]],template:function(o,t){if(1&o&&(n.I0R(0,"div",0),n.yuY(1,f,2,1,"div",1),n.I0R(2,"form",2),n.qCj("ngSubmit",function(){return t.submitLoginForm(t.loginForm)}),n.I0R(3,"label",3),n.OEk(4,"Email:"),n.C$Y(),n.wR5(5,"input",4),n.yuY(6,E,3,2,"div",5),n.I0R(7,"label",6),n.OEk(8,"Password:"),n.C$Y(),n.wR5(9,"input",7),n.yuY(10,v,3,2,"div",5),n.I0R(11,"button",8),n.yuY(12,h,2,0,"span",9)(13,L,1,0,"i",10),n.C$Y()()()),2&o){let s,m;n.yG2(),n.E7m("ngIf",t.error),n.yG2(),n.E7m("formGroup",t.loginForm),n.yG2(4),n.E7m("ngIf",(null==(s=t.loginForm.get("email"))?null:s.touched)&&(null==(s=t.loginForm.get("email"))?null:s.errors)),n.yG2(4),n.E7m("ngIf",(null==(m=t.loginForm.get("password"))?null:m.touched)&&(null==(m=t.loginForm.get("password"))?null:m.errors)),n.yG2(),n.E7m("disabled",t.loginForm.invalid),n.yG2(),n.E7m("ngIf",!t.isLoading),n.yG2(),n.E7m("ngIf",t.isLoading)}},dependencies:[g.MD,g.u_,i.sl,i.sz,i.ot,i.ue,i.u,i.uW,i.Wo]})}return e})()}}]);